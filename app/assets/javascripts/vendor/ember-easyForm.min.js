// ==========================================================================
// Project:   Ember EasyForm
// Copyright: Copyright 2013 DockYard, LLC. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================


 // Version: 1.0.0.beta.1

// Copyright: Copyright 2013 DockYard, LLC. and contributors.
!function(){Ember.EasyForm=Ember.Namespace.create({VERSION:"1.0.0.beta.1"})}(),function(){Ember.EasyForm.Config=Ember.Namespace.create({_wrappers:{"default":{formClass:"",fieldErrorClass:"fieldWithErrors",inputClass:"input",errorClass:"error",hintClass:"hint",labelClass:"",wrapControls:!1,controlsWrapperClass:""}},_inputTypes:{},registerWrapper:function(e,t){this._wrappers[e]=Ember.$.extend({},this._wrappers["default"],t)},getWrapper:function(e){var t=this._wrappers[e];return t},registerInputType:function(e,t){this._inputTypes[e]=t},getInputType:function(e){return this._inputTypes[e]}})}(),function(){Ember.Handlebars.registerHelper("error-field",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.propertyBinding&&(t.hash.property=Ember.Handlebars.get(this,t.hash.propertyBinding,t)),Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Error,t)})}(),function(){Ember.Handlebars.registerHelper("form-for",function(e,t){return t.data.keywords.formForModelPath=e,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Form,t)})}(),function(){Ember.Handlebars.registerHelper("hint-field",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.text||t.hash.textBinding?Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Hint,t):void 0})}(),function(){Ember.Handlebars.helpers["ember-input"]=Ember.Handlebars.helpers.input,Ember.Handlebars.registerHelper("input",function(e,t){return 1===arguments.length?Ember.Handlebars.helpers["ember-input"].call(this,arguments[0]):(t=Ember.EasyForm.processOptions(e,t),t.hash.isBlock=!!t.fn,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Input,t))})}(),function(){{var e=Ember.get;Ember.set}Ember.Handlebars.registerHelper("input-field",function(t,r){r=Ember.EasyForm.processOptions(t,r),r.hash.propertyBinding&&(r.hash.property=Ember.Handlebars.get(this,r.hash.propertyBinding,r)),r.hash.inputOptionsBinding&&(r.hash.inputOptions=Ember.Handlebars.get(this,r.hash.inputOptionsBinding,r));var s=Ember.Handlebars.get(this,"formForModelPath",r);r.hash.modelPath=s,t=r.hash.property;var i=function(e){if(!e)return null;var t=!!r.data.keywords[e.split(".")[0]];return t?e:s?s+"."+e:e};r.hash.valueBinding=i(t);var n=this,a=function(t){var r=(e(n,"content")||n).constructor;return r.proto?Ember.meta(r.proto(),!1).descs[t]:null};if(r.hash.viewName="input-field-"+r.data.view.elementId,r.hash.inputOptions){var o,h=r.hash.inputOptions;for(o in h)h.hasOwnProperty(o)&&(r.hash[o]=h[o]);delete r.hash.inputOptions}if("text"===r.hash.as)return Ember.Handlebars.helpers.view.call(n,Ember.EasyForm.TextArea,r);if("select"===r.hash.as)return delete r.hash.valueBinding,r.hash.contentBinding=i(r.hash.collection),r.hash.selectionBinding=i(r.hash.selection),r.hash.valueBinding=i(r.hash.value),Ember.isNone(r.hash.selectionBinding)&&Ember.isNone(r.hash.valueBinding)&&(r.hash.selectionBinding=i(t)),Ember.Handlebars.helpers.view.call(n,Ember.EasyForm.Select,r);if("checkbox"===r.hash.as)return Ember.isNone(r.hash.checkedBinding)&&(r.hash.checkedBinding=i(t)),Ember.Handlebars.helpers.view.call(n,Ember.EasyForm.Checkbox,r);if(r.hash.as){var l=Ember.EasyForm.Config.getInputType(r.hash.as);if(l)return Ember.Handlebars.helpers.view.call(n,l,r);r.hash.type=r.hash.as}else if(t.match(/password/))r.hash.type="password";else if(t.match(/email/))r.hash.type="email";else if(t.match(/url/))r.hash.type="url";else if(t.match(/color/))r.hash.type="color";else if(t.match(/^tel/))r.hash.type="tel";else if(t.match(/search/))r.hash.type="search";else if("number"===a(t)||"number"==typeof e(n,t))r.hash.type="number";else if("date"===a(t)||!Ember.isNone(e(n,t))&&e(n,t).constructor===Date)r.hash.type="date";else if("boolean"===a(t)||!Ember.isNone(n.get(t))&&e(n,t).constructor===Boolean)return r.hash.checkedBinding=t,Ember.Handlebars.helpers.view.call(n,Ember.EasyForm.Checkbox,r);return Ember.Handlebars.helpers.view.call(n,Ember.EasyForm.TextField,r)})}(),function(){Ember.Handlebars.registerHelper("label-field",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.viewName="label-field-"+t.data.view.elementId,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Label,t)})}(),function(){Ember.Handlebars.registerHelper("submit",function(e,t){return"object"==typeof e&&(t=e,e=void 0),t.hash.context=this,t.hash.value=e||"Submit","button"===t.hash.as?Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Button,t):Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Submit,t)})}(),function(){Ember.EasyForm.BaseView=Ember.View.extend({getWrapperConfig:function(e){var t=Ember.EasyForm.Config.getWrapper(this.get("wrapper"));return t[e]},wrapper:Ember.computed(function(){var e=this.nearestWithProperty("wrapper");return e?e.get("wrapper"):"default"}),formForModel:function(){var e=this.get("templateData.keywords.formForModelPath");return e?this.get("context."+e):this.get("context")}.property()})}(),function(){Ember.EasyForm.Checkbox=Ember.Checkbox.extend()}(),function(){Ember.EasyForm.Error=Ember.EasyForm.BaseView.extend({tagName:"span",init:function(){this._super(),this.classNames.push(this.getWrapperConfig("errorClass")),Ember.Binding.from("formForModel.errors."+this.property).to("errors").connect(this)},templateName:"easyForm/error"})}(),function(){Ember.EasyForm.Form=Ember.EasyForm.BaseView.extend({tagName:"form",attributeBindings:["novalidate"],novalidate:"novalidate",wrapper:"default",init:function(){this._super(),this.classNames.push(this.getWrapperConfig("formClass")),this.action=this.action||"submit"},submit:function(e){var t,r=this;e&&e.preventDefault(),Ember.isNone(this.get("formForModel.validate"))?this.get("controller").send(this.action):(t=Ember.isNone(this.get("formForModel").validate)?this.get("formForModel.content").validate():this.get("formForModel").validate(),t.then(function(){r.get("formForModel.isValid")&&r.get("controller").send(r.action)}))}})}(),function(){Ember.EasyForm.Hint=Ember.EasyForm.BaseView.extend({tagName:"span",init:function(){this._super(),this.classNames.push(this.getWrapperConfig("hintClass"))},render:function(e){e.push(Handlebars.Utils.escapeExpression(this.get("text")))},textChanged:function(){this.rerender()}.observes("text")})}(),function(){Ember.EasyForm.Input=Ember.EasyForm.BaseView.extend({init:function(){this._super(),this.classNameBindings.push("showError:"+this.getWrapperConfig("fieldErrorClass")),this.classNames.push(this.getWrapperConfig("inputClass")),Ember.defineProperty(this,"showError",Ember.computed.and("canShowValidationError","formForModel.errors."+this.property+".firstObject")),this.isBlock||(this.getWrapperConfig("wrapControls")?this.set("templateName","easyForm/wrapped_input"):this.set("templateName","easyForm/input"))},setupValidationDependencies:function(){var e,t=this.get("formForModel._dependentValidationKeys");if(t)for(e in t)t[e].contains(this.property)&&this._keysForValidationDependencies.pushObject(e)}.on("init"),_keysForValidationDependencies:Ember.A(),dependentValidationKeyCanTrigger:!1,tagName:"div",classNames:["string"],didInsertElement:function(){var e="label-field-"+this.elementId+".for",t=Ember.$("#"+e);(!this.isBlock||t[0])&&this.set(e,this.get("input-field-"+this.elementId+".elementId"))},concatenatedProperties:["inputOptions","bindableInputOptions"],inputOptions:["as","collection","optionValuePath","optionLabelPath","selection","value","multiple","name"],bindableInputOptions:["placeholder","prompt"],defaultOptions:{name:function(){return this.property?this.property:void 0}},controlsWrapperClass:function(){return this.getWrapperConfig("controlsWrapperClass")}.property(),inputOptionsValues:function(){var e,t,r,s,i={},n=this.inputOptions,a=this.bindableInputOptions,o=this.defaultOptions;for(e=0;e<n.length;e++)t=n[e],this[t]&&("boolean"==typeof this[t]&&(this[t]=t),i[t]=this[t]);for(e=0;e<a.length;e++)t=a[e],r=t+"Binding",(this[t]||this[r])&&(i[r]="view."+t);for(t in o)o.hasOwnProperty(t)&&(i[t]||(s=o[t].apply(this))&&(i[t]=s));return i}.property(),focusOut:function(){this.set("hasFocusedOut",!0),this.showValidationError()},showValidationError:function(){this.get("hasFocusedOut")&&(Ember.isEmpty(this.get("formForModel.errors."+this.property))?this.set("canShowValidationError",!1):this.set("canShowValidationError",!0))},input:function(){this._keysForValidationDependencies.forEach(function(e){this.get("parentView.childViews").forEach(function(t){t.property===e&&t.showValidationError()},this)},this)}})}(),function(){Ember.EasyForm.Label=Ember.EasyForm.BaseView.extend({tagName:"label",attributeBindings:["for"],labelText:function(){return this.get("text")||Ember.EasyForm.humanize(this.get("property"))}.property("text","property"),init:function(){this._super(),this.classNames.push(this.getWrapperConfig("labelClass"))},render:function(e){e.push(Handlebars.Utils.escapeExpression(this.get("labelText")))},labelTextChanged:function(){this.rerender()}.observes("labelText")})}(),function(){Ember.EasyForm.Select=Ember.Select.extend()}(),function(){Ember.EasyForm.Submit=Ember.EasyForm.BaseView.extend({tagName:"input",attributeBindings:["type","value","disabled"],type:"submit",disabled:function(){return!this.get("formForModel.isValid")}.property("formForModel.isValid"),init:function(){this._super(),this.set("value",this.value)}})}(),function(){Ember.EasyForm.Button=Ember.EasyForm.BaseView.extend({tagName:"button",template:Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o=this.escapeExpression;n={},a={},i.buffer.push(o(r._triageMustache.call(t,"text",{hash:{},contexts:[t],types:["ID"],hashContexts:a,hashTypes:n,data:i})))}),attributeBindings:["type","disabled"],type:"submit",disabled:function(){return!this.get("formForModel.isValid")}.property("formForModel.isValid"),init:function(){this._super(),this.set("formForModel.text",this.value)}})}(),function(){Ember.EasyForm.TextArea=Ember.TextArea.extend()}(),function(){Ember.EasyForm.TextField=Ember.TextField.extend()}(),function(){Ember.TEMPLATES["easyForm/error"]=Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o=this.escapeExpression;n={},a={},i.buffer.push(o(r._triageMustache.call(t,"view.errors.firstObject",{hash:{},contexts:[t],types:["ID"],hashContexts:a,hashTypes:n,data:i})))})}(),function(){Ember.TEMPLATES["easyForm/input"]=Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o,h,l="",p=r.helperMissing,m=this.escapeExpression;return a={propertyBinding:t,textBinding:t},o={propertyBinding:"STRING",textBinding:"STRING"},h={hash:{propertyBinding:"view.property",textBinding:"view.label"},contexts:[],types:[],hashContexts:a,hashTypes:o,data:i},i.buffer.push(m((n=r["label-field"]||t["label-field"],n?n.call(t,h):p.call(t,"label-field",h)))),o={},a={},h={hash:{},contexts:[t],types:["STRING"],hashContexts:a,hashTypes:o,data:i},i.buffer.push(m((n=r.partial||t.partial,n?n.call(t,"easyForm/inputControls",h):p.call(t,"partial","easyForm/inputControls",h)))),l})}(),function(){Ember.TEMPLATES["easyForm/inputControls"]=Ember.Handlebars.template(function(e,t,r,s,i){function n(e,t){var s,i,n,a;i={propertyBinding:e},n={propertyBinding:"STRING"},a={hash:{propertyBinding:"view.property"},contexts:[],types:[],hashContexts:i,hashTypes:n,data:t},t.buffer.push(c((s=r["error-field"]||e["error-field"],s?s.call(e,a):d.call(e,"error-field",a))))}function a(e,t){var s,i,n,a;i={propertyBinding:e,textBinding:e},n={propertyBinding:"STRING",textBinding:"STRING"},a={hash:{propertyBinding:"view.property",textBinding:"view.hint"},contexts:[],types:[],hashContexts:i,hashTypes:n,data:t},t.buffer.push(c((s=r["hint-field"]||e["hint-field"],s?s.call(e,a):d.call(e,"hint-field",a))))}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var o,h,l,p,m,u="",d=r.helperMissing,c=this.escapeExpression,b=this;return l={propertyBinding:t,inputOptionsBinding:t},p={propertyBinding:"STRING",inputOptionsBinding:"STRING"},m={hash:{propertyBinding:"view.property",inputOptionsBinding:"view.inputOptionsValues"},contexts:[],types:[],hashContexts:l,hashTypes:p,data:i},i.buffer.push(c((o=r["input-field"]||t["input-field"],o?o.call(t,m):d.call(t,"input-field",m)))),p={},l={},h=r["if"].call(t,"view.showError",{hash:{},inverse:b.noop,fn:b.program(1,n,i),contexts:[t],types:["ID"],hashContexts:l,hashTypes:p,data:i}),(h||0===h)&&i.buffer.push(h),p={},l={},h=r["if"].call(t,"view.hint",{hash:{},inverse:b.noop,fn:b.program(3,a,i),contexts:[t],types:["ID"],hashContexts:l,hashTypes:p,data:i}),(h||0===h)&&i.buffer.push(h),u})}(),function(){Ember.TEMPLATES["easyForm/wrapped_input"]=Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o,h,l="",p=r.helperMissing,m=this.escapeExpression;return a={propertyBinding:t,textBinding:t},o={propertyBinding:"STRING",textBinding:"STRING"},h={hash:{propertyBinding:"view.property",textBinding:"view.label"},contexts:[],types:[],hashContexts:a,hashTypes:o,data:i},i.buffer.push(m((n=r["label-field"]||t["label-field"],n?n.call(t,h):p.call(t,"label-field",h)))),i.buffer.push('<div class="'),o={},a={},i.buffer.push(m(r.unbound.call(t,"view.controlsWrapperClass",{hash:{},contexts:[t],types:["ID"],hashContexts:a,hashTypes:o,data:i}))),i.buffer.push('">'),o={},a={},h={hash:{},contexts:[t],types:["STRING"],hashContexts:a,hashTypes:o,data:i},i.buffer.push(m((n=r.partial||t.partial,n?n.call(t,"easyForm/inputControls",h):p.call(t,"partial","easyForm/inputControls",h)))),i.buffer.push("</div>"),l})}(),function(){Ember.EasyForm.TEMPLATES={}}(),function(){Ember.EasyForm.humanize=function(e){return e.underscore().split("_").join(" ").capitalize()},Ember.EasyForm.processOptions=function(e,t){return t?t.hash.property=e:t=e,t}}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");